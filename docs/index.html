<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Indexed Catalogue · Movies & Series</title>
    <meta name="description" content="Compact index of curated movie and television catalogue entries with searchable classifications.">
    <style>
        :root {
            --bg: #06080d;
            --fg: #f4f6fb;
            --fg-muted: #9ca7bb;
            --surface: #0e131d;
            --surface-alt: #121927;
            --border: #1f2b3d;
            --accent: #4ecdf6;
            --accent-soft: rgba(78, 205, 246, 0.12);
            --accent-strong: #d0ff45;
            --danger: #ff6b6b;
            --font-base: "Segoe UI", "Helvetica Neue", Arial, sans-serif;
            --font-mono: "Cascadia Code", "Fira Code", "SFMono-Regular", monospace;
            --radius: 10px;
        }

        * {
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            margin: 0;
            font-family: var(--font-base);
            background: var(--bg);
            color: var(--fg);
            line-height: 1.55;
        }

        a {
            color: inherit;
        }

        header {
            position: sticky;
            top: 0;
            z-index: 20;
            backdrop-filter: blur(14px);
            background: rgba(6, 8, 13, 0.92);
            border-bottom: 1px solid var(--border);
        }

        .masthead {
            max-width: 1100px;
            margin: 0 auto;
            padding: 1rem 1.5rem;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
        }

        .brand {
            font-weight: 700;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            font-size: 1rem;
        }

        .masthead-nav {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
        }

        .masthead-nav a {
            text-decoration: none;
            padding: 0.45rem 0.9rem;
            border-radius: 999px;
            border: 1px solid transparent;
            font-size: 0.9rem;
            color: var(--fg-muted);
            transition: border-color 0.15s ease, color 0.15s ease, background 0.15s ease;
        }

        .masthead-nav a:hover,
        .masthead-nav a:focus {
            color: var(--accent);
            border-color: var(--accent);
            outline: none;
        }

        .masthead-nav .is-active {
            color: var(--bg);
            background: var(--accent);
            border-color: var(--accent);
        }

        main {
            max-width: 1100px;
            margin: 0 auto;
            padding: 3rem 1.5rem 4rem;
            display: flex;
            flex-direction: column;
            gap: 3rem;
        }

        .intro {
            display: grid;
            gap: 1rem;
        }

        .intro h1 {
            font-size: clamp(1.8rem, 2.6vw, 2.4rem);
            margin: 0;
            letter-spacing: 0.04em;
        }

        .intro p {
            max-width: 640px;
            color: var(--fg-muted);
        }

        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
        }

        .metric-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 1rem 1.25rem;
            display: grid;
            gap: 0.35rem;
        }

        .metric-label {
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.09em;
            color: var(--fg-muted);
        }

        .metric-value {
            font-size: 1.65rem;
            font-family: var(--font-mono);
        }

        .controls {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 1.25rem;
            display: grid;
            gap: 1rem;
        }

        .controls h2 {
            margin: 0;
            font-size: 1.1rem;
            letter-spacing: 0.05em;
        }

        .control-row {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            align-items: center;
        }

        .control-row label {
            font-size: 0.85rem;
            text-transform: uppercase;
            color: var(--fg-muted);
            letter-spacing: 0.08em;
        }

        .search-box {
            flex: 1 1 220px;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 0.6rem 0.85rem;
            border-radius: var(--radius);
            border: 1px solid var(--border);
            background: var(--surface-alt);
            color: var(--fg);
            font-size: 0.95rem;
        }

        .search-box input::placeholder {
            color: var(--fg-muted);
        }

        .pill-group {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .pill-btn {
            border: 1px solid var(--border);
            background: var(--surface-alt);
            color: var(--fg-muted);
            padding: 0.45rem 0.9rem;
            border-radius: 999px;
            font-size: 0.85rem;
            letter-spacing: 0.05em;
            cursor: pointer;
            transition: border-color 0.15s ease, color 0.15s ease, background 0.15s ease;
        }

        .pill-btn[aria-pressed="true"] {
            color: var(--bg);
            background: var(--accent);
            border-color: var(--accent);
        }

        .pill-btn:focus-visible {
            outline: 2px solid var(--accent);
            outline-offset: 2px;
        }

        .table-wrap {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            overflow: hidden;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95rem;
        }

        caption {
            caption-side: top;
            text-align: left;
            padding: 1rem 1.25rem 0.5rem;
            font-size: 0.95rem;
            color: var(--fg-muted);
        }

        thead {
            background: var(--surface-alt);
            font-size: 0.8rem;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            color: var(--fg-muted);
        }

        th,
        td {
            padding: 0.75rem 1.25rem;
            border-bottom: 1px solid var(--border);
            text-align: left;
        }

        tbody tr:hover {
            background: var(--accent-soft);
        }

        .type-pill {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 72px;
            border-radius: 999px;
            padding: 0.2rem 0.6rem;
            font-size: 0.75rem;
            font-weight: 600;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            background: var(--surface-alt);
            border: 1px solid var(--border);
        }

        .type-movie {
            color: var(--accent);
        }

        .type-series {
            color: var(--accent-strong);
        }

        .index-section {
            display: grid;
            gap: 1rem;
        }

        .index-section h2 {
            margin: 0;
            font-size: 1.1rem;
            letter-spacing: 0.05em;
        }

        .alphabet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 0.75rem;
        }

        .alphabet-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 0.75rem 0.9rem;
            display: grid;
            gap: 0.35rem;
        }

        .alphabet-card strong {
            font-family: var(--font-mono);
            font-size: 1rem;
            color: var(--accent);
        }

        .alphabet-card span {
            font-size: 0.75rem;
            color: var(--fg-muted);
        }

        .taxonomy-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1rem;
        }

        .taxonomy-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 1rem 1.25rem;
            display: grid;
            gap: 0.4rem;
        }

        .taxonomy-card h3 {
            margin: 0;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--fg-muted);
        }

        .taxonomy-card ul {
            list-style: none;
            margin: 0;
            padding: 0;
            display: grid;
            gap: 0.3rem;
        }

        .taxonomy-card li {
            display: flex;
            justify-content: space-between;
            gap: 0.75rem;
            font-size: 0.9rem;
        }

        .taxonomy-card li span {
            color: var(--fg-muted);
            font-size: 0.75rem;
        }

        .empty-state {
            padding: 1rem 1.25rem;
            color: var(--danger);
            font-family: var(--font-mono);
            font-size: 0.9rem;
        }

        footer {
            padding: 2rem 1.5rem 3rem;
            text-align: center;
            font-size: 0.75rem;
            color: var(--fg-muted);
        }

        @media (max-width: 700px) {
            th,
            td {
                padding-inline: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="masthead">
            <div class="brand">Indexed Catalogue</div>
            <nav class="masthead-nav" aria-label="Primary">
                <a class="is-active" href="#complete-index">Index</a>
                <a href="#dimensions">Dimensions</a>
                <a href="#taxonomy">Taxonomy</a>
            </nav>
        </div>
    </header>

    <main>
        <section class="intro" aria-labelledby="introduction">
            <h1 id="introduction">Movies & Television Index</h1>
            <p>
                A minimal catalogue focused on indexable metadata: every entry lists its steward, producing studio,
                release year, and running length. Use the controls to slice the catalogue, or browse the alphabetical
                keys and taxonomy extracts for quick orientation.
            </p>
        </section>

        <section class="metrics" aria-label="Aggregate figures">
            <article class="metric-card">
                <span class="metric-label">Catalogued Titles</span>
                <span class="metric-value" data-metric="total">—</span>
                <span class="metric-label">Movies & Series tracked</span>
            </article>
            <article class="metric-card">
                <span class="metric-label">Movies</span>
                <span class="metric-value" data-metric="movies">—</span>
                <span class="metric-label">Feature-length records</span>
            </article>
            <article class="metric-card">
                <span class="metric-label">Series</span>
                <span class="metric-value" data-metric="series">—</span>
                <span class="metric-label">Serialized television entries</span>
            </article>
            <article class="metric-card">
                <span class="metric-label">Distinct Stewards</span>
                <span class="metric-value" data-metric="creators">—</span>
                <span class="metric-label">Directors or showrunners</span>
            </article>
        </section>

        <section class="controls" aria-labelledby="controls-heading">
            <div class="index-section">
                <div class="control-row">
                    <h2 id="controls-heading">Filter Catalogue</h2>
                </div>
                <div class="control-row">
                    <label for="search">Search</label>
                    <div class="search-box">
                        <input id="search" name="search" type="search" placeholder="Title, steward, or studio" autocomplete="off">
                    </div>
                </div>
                <div class="control-row" role="group" aria-label="Filter by type">
                    <label>Type</label>
                    <div class="pill-group" id="typeFilters">
                        <button type="button" class="pill-btn" data-filter="all" aria-pressed="true">All</button>
                        <button type="button" class="pill-btn" data-filter="Movie" aria-pressed="false">Movies</button>
                        <button type="button" class="pill-btn" data-filter="Series" aria-pressed="false">Series</button>
                    </div>
                </div>
            </div>
        </section>

        <section class="table-wrap" id="complete-index">
            <table>
                <caption id="table-caption">Index entries (loading…)</caption>
                <thead>
                    <tr>
                        <th scope="col">Title</th>
                        <th scope="col">Type</th>
                        <th scope="col">Year</th>
                        <th scope="col">Duration</th>
                        <th scope="col">Steward</th>
                        <th scope="col">Studio</th>
                    </tr>
                </thead>
                <tbody id="index-body" aria-live="polite">
                    <tr>
                        <td colspan="6" class="empty-state">Loading catalogue…</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section class="index-section" id="dimensions" aria-labelledby="alphabetical-heading">
            <h2 id="alphabetical-heading">Alphabetical Keys</h2>
            <p class="intro-note" style="color: var(--fg-muted); max-width: 640px;">
                Each card lists the first titles within a letter band and the count currently in view. Use it to jump to
                clusters or confirm coverage.
            </p>
            <div class="alphabet-grid" id="alphabet-grid">
                <div class="alphabet-card">
                    <strong>—</strong>
                    <span>Waiting for catalogue.</span>
                </div>
            </div>
        </section>

        <section class="index-section" id="taxonomy" aria-labelledby="taxonomy-heading">
            <h2 id="taxonomy-heading">Taxonomy Extracts</h2>
            <div class="taxonomy-grid">
                <article class="taxonomy-card" aria-live="polite">
                    <h3>Dominant Categories</h3>
                    <ul data-taxonomy="categories">
                        <li><span>Loading…</span></li>
                    </ul>
                </article>
                <article class="taxonomy-card">
                    <h3>Prolific Stewards</h3>
                    <ul data-taxonomy="creators">
                        <li><span>Loading…</span></li>
                    </ul>
                </article>
                <article class="taxonomy-card">
                    <h3>Studios in Catalogue</h3>
                    <ul data-taxonomy="studios">
                        <li><span>Loading…</span></li>
                    </ul>
                </article>
            </div>
        </section>
    </main>

    <footer>
        This index is static and intentionally image-free to emphasise metadata, structure, and performance-first delivery.
    </footer>

    <script>
        (function () {
            const state = {
                dataset: [],
                filtered: [],
                type: "all",
                query: ""
            };

            const selectors = {
                metrics: {
                    total: document.querySelector('[data-metric="total"]'),
                    movies: document.querySelector('[data-metric="movies"]'),
                    series: document.querySelector('[data-metric="series"]'),
                    creators: document.querySelector('[data-metric="creators"]')
                },
                tableBody: document.getElementById('index-body'),
                tableCaption: document.getElementById('table-caption'),
                alphabetGrid: document.getElementById('alphabet-grid'),
                taxonomy: {
                    categories: document.querySelector('[data-taxonomy="categories"]'),
                    creators: document.querySelector('[data-taxonomy="creators"]'),
                    studios: document.querySelector('[data-taxonomy="studios"]')
                },
                searchInput: document.getElementById('search'),
                typeFilters: document.getElementById('typeFilters')
            };

            const movieGenres = {
                "Inception": ["Science Fiction", "Thriller"],
                "The Shawshank Redemption": ["Drama"],
                "Pulp Fiction": ["Crime", "Drama"],
                "The Dark Knight": ["Action", "Crime"],
                "Forrest Gump": ["Drama", "Romance"],
                "Interstellar": ["Science Fiction", "Adventure"],
                "The Matrix": ["Science Fiction", "Action"],
                "Fight Club": ["Drama", "Thriller"],
                "Goodfellas": ["Crime", "Drama"],
                "The Godfather": ["Crime", "Drama"],
                "Schindler's List": ["Drama", "Historical"],
                "Saving Private Ryan": ["War", "Drama"],
                "The Silence of the Lambs": ["Thriller", "Crime"],
                "Se7en": ["Thriller", "Crime"],
                "Gladiator": ["Action", "Historical"]
            };

            const curatedSeries = [
                {
                    id: "series-breaking-bad",
                    title: "Breaking Bad",
                    release_year: 2008,
                    seasons: 5,
                    steward: "Vince Gilligan",
                    studio: "AMC",
                    categories: ["Crime", "Drama"]
                },
                {
                    id: "series-the-expanse",
                    title: "The Expanse",
                    release_year: 2015,
                    seasons: 6,
                    steward: "Mark Fergus & Hawk Ostby",
                    studio: "Alcon Entertainment",
                    categories: ["Science Fiction", "Adventure"]
                },
                {
                    id: "series-fargo",
                    title: "Fargo",
                    release_year: 2014,
                    seasons: 5,
                    steward: "Noah Hawley",
                    studio: "FX Productions",
                    categories: ["Crime", "Anthology"]
                },
                {
                    id: "series-chernobyl",
                    title: "Chernobyl",
                    release_year: 2019,
                    seasons: 1,
                    steward: "Craig Mazin",
                    studio: "HBO",
                    categories: ["Historical", "Drama"]
                },
                {
                    id: "series-dark",
                    title: "Dark",
                    release_year: 2017,
                    seasons: 3,
                    steward: "Baran bo Odar & Jantje Friese",
                    studio: "W&B Television",
                    categories: ["Science Fiction", "Mystery"]
                }
            ];

            function normaliseMovies(movies) {
                return movies.map((movie) => {
                    const categories = movieGenres[movie.title] || ["Unclassified"];
                    return {
                        id: `movie-${movie.movie_id}`,
                        title: movie.title,
                        type: "Movie",
                        releaseYear: movie.release_year,
                        durationLabel: `${movie.duration_minutes} min`,
                        durationValue: movie.duration_minutes,
                        steward: movie.director_name,
                        studio: movie.studio_name,
                        categories
                    };
                });
            }

            function normaliseSeries(seriesList) {
                return seriesList.map((series) => ({
                    id: series.id,
                    title: series.title,
                    type: "Series",
                    releaseYear: series.release_year,
                    durationLabel: `${series.seasons} season${series.seasons > 1 ? "s" : ""}`,
                    durationValue: series.seasons,
                    steward: series.steward,
                    studio: series.studio,
                    categories: series.categories
                }));
            }

            function updateMetrics(dataset) {
                const total = dataset.length;
                const movies = dataset.filter((item) => item.type === "Movie").length;
                const series = dataset.filter((item) => item.type === "Series").length;
                const creators = new Set(dataset.map((item) => item.steward)).size;

                selectors.metrics.total.textContent = total;
                selectors.metrics.movies.textContent = movies;
                selectors.metrics.series.textContent = series;
                selectors.metrics.creators.textContent = creators;
            }

            function applyFilters() {
                const query = state.query.trim().toLowerCase();
                const type = state.type;

                state.filtered = state.dataset.filter((item) => {
                    if (type !== "all" && item.type !== type) {
                        return false;
                    }

                    if (!query) {
                        return true;
                    }

                    const haystack = `${item.title} ${item.steward} ${item.studio}`.toLowerCase();
                    return haystack.includes(query);
                });

                renderTable(state.filtered);
                renderAlphabet(state.filtered);
                renderTaxonomy(state.dataset);
            }

            function renderTable(rows) {
                selectors.tableBody.innerHTML = "";

                if (rows.length === 0) {
                    const emptyRow = document.createElement("tr");
                    const cell = document.createElement("td");
                    cell.colSpan = 6;
                    cell.className = "empty-state";
                    cell.textContent = "No entries match the current filters.";
                    emptyRow.appendChild(cell);
                    selectors.tableBody.appendChild(emptyRow);
                } else {
                    rows.sort((a, b) => a.title.localeCompare(b.title, "en", { sensitivity: "base" }));
                    const fragment = document.createDocumentFragment();

                    rows.forEach((item) => {
                        const row = document.createElement("tr");

                        const titleCell = document.createElement("td");
                        titleCell.textContent = item.title;
                        row.appendChild(titleCell);

                        const typeCell = document.createElement("td");
                        const pill = document.createElement("span");
                        pill.className = `type-pill ${item.type === "Movie" ? "type-movie" : "type-series"}`;
                        pill.textContent = item.type;
                        typeCell.appendChild(pill);
                        row.appendChild(typeCell);

                        const yearCell = document.createElement("td");
                        yearCell.textContent = item.releaseYear || "—";
                        row.appendChild(yearCell);

                        const durationCell = document.createElement("td");
                        durationCell.textContent = item.durationLabel;
                        row.appendChild(durationCell);

                        const stewardCell = document.createElement("td");
                        stewardCell.textContent = item.steward;
                        row.appendChild(stewardCell);

                        const studioCell = document.createElement("td");
                        studioCell.textContent = item.studio;
                        row.appendChild(studioCell);

                        fragment.appendChild(row);
                    });

                    selectors.tableBody.appendChild(fragment);
                }

                selectors.tableCaption.textContent = `Index entries (${rows.length.toString()} currently visible)`;
            }

            function renderAlphabet(rows) {
                selectors.alphabetGrid.innerHTML = "";

                if (rows.length === 0) {
                    const card = document.createElement("div");
                    card.className = "alphabet-card";
                    card.innerHTML = "<strong>Ø</strong><span>Empty result set.</span>";
                    selectors.alphabetGrid.appendChild(card);
                    return;
                }

                const buckets = new Map();

                rows.forEach((item) => {
                    const initial = /^[A-Z]/i.test(item.title) ? item.title[0].toUpperCase() : "#";
                    if (!buckets.has(initial)) {
                        buckets.set(initial, []);
                    }
                    buckets.get(initial).push(item.title);
                });

                const sortedKeys = Array.from(buckets.keys()).sort((a, b) => a.localeCompare(b));
                const fragment = document.createDocumentFragment();

                sortedKeys.forEach((letter) => {
                    const titles = buckets.get(letter);
                    titles.sort((a, b) => a.localeCompare(b, "en", { sensitivity: "base" }));
                    const preview = titles.slice(0, 4).join(", ");

                    const card = document.createElement("div");
                    card.className = "alphabet-card";

                    const letterEl = document.createElement("strong");
                    letterEl.textContent = letter;
                    card.appendChild(letterEl);

                    const countEl = document.createElement("span");
                    countEl.textContent = `${titles.length} entr${titles.length === 1 ? "y" : "ies"}`;
                    card.appendChild(countEl);

                    const previewEl = document.createElement("span");
                    previewEl.textContent = preview;
                    card.appendChild(previewEl);

                    fragment.appendChild(card);
                });

                selectors.alphabetGrid.appendChild(fragment);
            }

            function renderTaxonomy(dataset) {
                populateList(selectors.taxonomy.categories, aggregateCategories(dataset));
                populateList(selectors.taxonomy.creators, aggregateCount(dataset, "steward"));
                populateList(selectors.taxonomy.studios, aggregateCount(dataset, "studio"));
            }

            function aggregateCategories(dataset) {
                const tally = new Map();
                dataset.forEach((item) => {
                    item.categories.forEach((category) => {
                        const key = category || "Unclassified";
                        tally.set(key, (tally.get(key) || 0) + 1);
                    });
                });

                return Array.from(tally.entries())
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, 6);
            }

            function aggregateCount(dataset, key) {
                const tally = new Map();
                dataset.forEach((item) => {
                    const value = item[key] || "Unknown";
                    tally.set(value, (tally.get(value) || 0) + 1);
                });

                return Array.from(tally.entries())
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, 6);
            }

            function populateList(listElement, entries) {
                listElement.innerHTML = "";

                if (!entries.length) {
                    const placeholder = document.createElement("li");
                    placeholder.textContent = "No data";
                    listElement.appendChild(placeholder);
                    return;
                }

                const fragment = document.createDocumentFragment();
                entries.forEach(([label, count]) => {
                    const item = document.createElement("li");
                    const name = document.createElement("span");
                    name.textContent = label;
                    const amount = document.createElement("span");
                    amount.textContent = count.toString();
                    item.appendChild(name);
                    item.appendChild(amount);
                    fragment.appendChild(item);
                });

                listElement.appendChild(fragment);
            }

            function loadDataset() {
                return fetch("data/movies.json")
                    .then((response) => {
                        if (!response.ok) {
                            throw new Error(`Failed to load data: ${response.status}`);
                        }
                        return response.json();
                    })
                    .then((movies) => {
                        const normalisedMovies = normaliseMovies(movies);
                        const normalisedSeries = normaliseSeries(curatedSeries);
                        state.dataset = [...normalisedMovies, ...normalisedSeries];
                        updateMetrics(state.dataset);
                        applyFilters();
                    })
                    .catch((error) => {
                        console.error(error);
                        selectors.tableBody.innerHTML = "";
                        const errorRow = document.createElement("tr");
                        const cell = document.createElement("td");
                        cell.colSpan = 6;
                        cell.className = "empty-state";
                        cell.textContent = "Catalogue data failed to load.";
                        errorRow.appendChild(cell);
                        selectors.tableBody.appendChild(errorRow);
                        selectors.tableCaption.textContent = "Index entries (unavailable)";
                    });
            }

            selectors.searchInput.addEventListener('input', (event) => {
                state.query = event.target.value;
                applyFilters();
            });

            selectors.typeFilters.addEventListener('click', (event) => {
                if (event.target instanceof HTMLButtonElement) {
                    const filter = event.target.dataset.filter;
                    if (!filter) {
                        return;
                    }

                    state.type = filter === "all" ? "all" : filter;

                    Array.from(selectors.typeFilters.children).forEach((child) => {
                        if (child instanceof HTMLButtonElement) {
                            child.setAttribute('aria-pressed', child === event.target ? 'true' : 'false');
                        }
                    });

                    applyFilters();
                }
            });

            loadDataset();
        })();
    </script>
</body>
</html>
