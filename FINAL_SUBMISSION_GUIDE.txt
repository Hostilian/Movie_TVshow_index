================================================================================
       üé¨ FINAL PORTAL SUBMISSION GUIDE - ALL REQUIREMENTS MET üé¨
       Database Systems (EIE36E) - xozte001 - Movie Database
================================================================================

This document contains EVERYTHING you need to copy-paste into the DBS portal
to meet ALL requirements:

‚úÖ 8+ Entity Types (HAVE 8: director, actor, genre, country, studio, movie, user_rating, award)
‚úÖ Category CN covered (D5, D9)
‚úÖ Category D1N covered (D6, D10)
‚úÖ Conceptual Schema (exists - needs upload)
‚úÖ Loop Discussion (text below)
‚úÖ 10+ Natural Queries (D1-D10)
‚úÖ All queries make sense (100+ chars each)

================================================================================
                 SECTION 1: LOOP DISCUSSION
       (Copy this EXACTLY to the "Loop discussion" field in portal)
================================================================================

YES - there IS a circular dependency (loop) in the Movie Database schema.

THE LOOP:
The MOVIE table contains a self-referencing foreign key called "sequel_of" that points back to movie_id within the same table. This creates a circular dependency where MOVIE references itself:

MOVIE.sequel_of ‚Üí MOVIE.movie_id

This relationship models movie sequel chains. For example, "The Dark Knight Rises" can reference "The Dark Knight" which can reference "Batman Begins", forming a franchise chain within the same entity.

WHY THIS LOOP EXISTS:
Movie franchises naturally form sequel relationships. The sequel_of column enables queries like finding all sequels to a movie or tracing complete franchise histories. This is a legitimate real-world modeling requirement for a movie database.

TECHNICAL IMPLICATIONS:
1. Recursive CTEs (WITH RECURSIVE) are needed to traverse sequel chains
2. Original movies must be inserted before their sequels
3. ON DELETE SET NULL prevents orphan references when originals are deleted
4. Application logic must prevent circular chains (Movie A ‚Üí B ‚Üí A)

BENEFITS:
Enables franchise analysis, sequel chain traversal, and maintains normalized relationships between related movies without requiring a separate table.

================================================================================
                 SECTION 2: THE 10 QUERIES FOR PORTAL
       (Replace your current D1-D10 with these to cover CN and D1N)
================================================================================

================= D1 (Categories: A F2) =================
NATURAL LANGUAGE:
List all movies together with their director names by joining the movie and director tables so we can see who directed each film sorted by year.

RA:
œÄ(movie_id, title, year, name)(MOVIE <* DIRECTOR)

SQL:
SELECT m.movie_id, m.title, m.year, d.name AS director_name
FROM movie AS m
JOIN director AS d ON m.director_id = d.director_id
ORDER BY m.year;

================= D2 (Categories: A F2) =================
NATURAL LANGUAGE:
Find all actors who appeared in the movie titled Inception by joining actor and movie_actor tables to see the complete cast with their role types.

RA:
œÄ(actor_id, name, role_type)(œÉ(title = 'Inception')(ACTOR <* MOVIE_ACTOR <* MOVIE))

SQL:
SELECT a.actor_id, a.name, ma.role_type
FROM actor AS a
JOIN movie_actor AS ma ON a.actor_id = ma.actor_id
JOIN movie AS m ON ma.movie_id = m.movie_id
WHERE m.title = 'Inception';

================= D3 (Categories: A F2) =================
NATURAL LANGUAGE:
Show all movies that belong to the Action genre by joining movie, movie_genre and genre tables to filter action films sorted by their IMDb rating.

RA:
œÄ(movie_id, title, year, imdb_rating)(œÉ(genre_name = 'Action')(MOVIE <* MOVIE_GENRE <* GENRE))

SQL:
SELECT m.movie_id, m.title, m.year, m.imdb_rating
FROM movie AS m
JOIN movie_genre AS mg ON m.movie_id = mg.movie_id
JOIN genre AS g ON mg.genre_id = g.genre_id
WHERE g.genre_name = 'Action'
ORDER BY m.imdb_rating DESC;

================= D4 (Categories: A F2) =================
NATURAL LANGUAGE:
List all user reviews for movies directed by Christopher Nolan by joining user_rating, movie and director tables to see audience feedback on his films.

RA:
œÄ(title, user_name, rating_value, review_text)(œÉ(name = 'Christopher Nolan')(USER_RATING <* MOVIE <* DIRECTOR))

SQL:
SELECT m.title, ur.user_name, ur.rating_value, ur.review_text
FROM user_rating AS ur
JOIN movie AS m ON ur.movie_id = m.movie_id
JOIN director AS d ON m.director_id = d.director_id
WHERE d.name = 'Christopher Nolan';

================= D5 (Categories: C N) ‚Üê COVERS CN! =================
NATURAL LANGUAGE:
Show all movies with their award information including movies that have never received any awards so the marketing team can identify films needing promotion push.

RA:
œÄ(movie_id, title, year, award_name, is_winner)(MOVIE ‚üï AWARD)

SQL:
SELECT m.movie_id, m.title, m.year, a.award_name, a.is_winner
FROM movie AS m
LEFT JOIN award AS a ON m.movie_id = a.movie_id;

================= D6 (Categories: D1 N) ‚Üê COVERS D1N! =================
NATURAL LANGUAGE:
List all directors together with their movies including directors who have not yet directed any films in our database so HR can track inactive talent.

RA:
œÄ(director_id, name, birth_year, movie_id, title, year)(DIRECTOR ‚üï MOVIE)

SQL:
SELECT d.director_id, d.name, d.birth_year, m.movie_id, m.title, m.year
FROM director AS d
LEFT JOIN movie AS m ON d.director_id = m.director_id;

================= D7 (Categories: A F2) =================
NATURAL LANGUAGE:
List all awards that were won not just nominated along with movie title using WHERE clause to filter winners and ORDER BY to sort chronologically by year awarded.

RA:
œÄ(award_id, award_name, category, year_awarded, title)(œÉ(is_winner = TRUE)(AWARD <* MOVIE))

SQL:
SELECT a.award_id, a.award_name, a.category, a.year_awarded, m.title
FROM award AS a
JOIN movie AS m ON a.movie_id = m.movie_id
WHERE a.is_winner = TRUE
ORDER BY a.year_awarded;

================= D8 (Categories: A F2) =================
NATURAL LANGUAGE:
Find all lead actors in movies that have an IMDb rating above eight using DISTINCT to avoid duplicates when actors have multiple lead roles in high-rated films.

RA:
œÄ(actor_id, name)(œÉ(imdb_rating > 8 AND role_type = 'lead')(ACTOR <* MOVIE_ACTOR <* MOVIE))

SQL:
SELECT DISTINCT a.actor_id, a.name
FROM actor AS a
JOIN movie_actor AS ma ON a.actor_id = ma.actor_id
JOIN movie AS m ON ma.movie_id = m.movie_id
WHERE m.imdb_rating > 8 AND ma.role_type = 'lead';

================= D9 (Categories: C N) ‚Üê COVERS CN! =================
NATURAL LANGUAGE:
Display all genres and show which movies belong to each genre including genres that currently have no movies assigned so content managers can identify gaps in catalog coverage.

RA:
œÄ(genre_id, genre_name, movie_id, title)(GENRE ‚üï MOVIE_GENRE ‚üï MOVIE)

SQL:
SELECT g.genre_id, g.genre_name, m.movie_id, m.title
FROM genre AS g
LEFT JOIN movie_genre AS mg ON g.genre_id = mg.genre_id
LEFT JOIN movie AS m ON mg.movie_id = m.movie_id;

================= D10 (Categories: D1 N) ‚Üê COVERS D1N! =================
NATURAL LANGUAGE:
Show all actors with their movie appearances including actors who have not been cast in any films yet so casting directors can find available talent for new projects.

RA:
œÄ(actor_id, name, movie_id, role_type)(ACTOR ‚üï MOVIE_ACTOR)

SQL:
SELECT a.actor_id, a.name, ma.movie_id, ma.role_type
FROM actor AS a
LEFT JOIN movie_actor AS ma ON a.actor_id = ma.actor_id;

================================================================================
                 SECTION 3: CONCEPTUAL SCHEMA
================================================================================

Your conceptual schema file is: 06_conceptual_schema.md

It contains an ER diagram with:
- 8 Primary Entities: DIRECTOR, ACTOR, GENRE, COUNTRY, STUDIO, MOVIE, USER_RATING, AWARD
- 3 Binding Entities: MOVIE_ACTOR, MOVIE_GENRE, MOVIE_COUNTRY
- Self-referencing loop: MOVIE.sequel_of ‚Üí MOVIE.movie_id

Upload this file or paste the Mermaid diagram to the Conceptual Schema section.

================================================================================
                 SECTION 4: CATEGORY COVERAGE CHECK
================================================================================

Your queries now cover these categories:

ITERATION 1 (3 queries): C ‚úì
ITERATION 2 (10 queries):
  - A (Projection): D1-D10 ‚úì
  - F2 (Join + Projection): D1, D2, D3, D4, D7, D8 ‚úì
  - C (Selection/Projection): D5, D9 ‚úì
  - N (Outer Join): D5, D6, D9, D10 ‚úì
  - D1 (Two-table Join): D6, D10 ‚úì

COMBINED CATEGORIES:
  - CN (C + N): D5, D9 ‚úì ‚Üê NOW COVERED!
  - D1N (D1 + N): D6, D10 ‚úì ‚Üê NOW COVERED!

================================================================================
                 SECTION 5: QUICK ACTIONS CHECKLIST
================================================================================

1. [ ] Go to portal ‚Üí "Loop discussion" ‚Üí Paste text from Section 1
2. [ ] Go to portal ‚Üí "Conceptual schema" ‚Üí Upload 06_conceptual_schema.md
       or paste the Mermaid ER diagram
3. [ ] Go to portal ‚Üí "Queries" ‚Üí Replace D5 with new CN query
4. [ ] Go to portal ‚Üí "Queries" ‚Üí Replace D6 with new D1N query
5. [ ] Go to portal ‚Üí "Queries" ‚Üí Replace D9 with new CN query
6. [ ] Go to portal ‚Üí "Queries" ‚Üí Replace D10 with new D1N query
7. [ ] Click "Check and submission" to verify all requirements pass

================================================================================
                 SUMMARY OF CHANGES NEEDED
================================================================================

QUERIES TO REPLACE IN PORTAL:

OLD D5: Find movies with their production countries...
NEW D5: Show all movies with their award information including movies that
        have never received any awards... (Uses LEFT JOIN = CN category)

OLD D6: Show movies with their studio name...
NEW D6: List all directors together with their movies including directors
        who have not yet directed any films... (Uses LEFT JOIN = D1N category)

OLD D9: Show all genres assigned to the movie The Dark Knight...
NEW D9: Display all genres and show which movies belong to each genre
        including genres that currently have no movies... (Uses LEFT JOIN = CN)

OLD D10: Find all movies that were released after the year 2010...
NEW D10: Show all actors with their movie appearances including actors who
         have not been cast in any films... (Uses LEFT JOIN = D1N category)

================================================================================
                              END OF GUIDE
================================================================================
